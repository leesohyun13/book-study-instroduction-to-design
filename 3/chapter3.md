# Chapter 3. 클래스 설계: 모든 것과 연결되는 설계 기반 

## 1. 클래스 단위로 잘 동작하도록 설계하기 
- 클래스 하나로도 잘 동작해야 한다.
- 클래스는 인스턴스 변수 + 메서드의 조합
    - 잘 만들어진 클래스는
      1. 인스턴스 변수
      2. 인스턴스 변수에 잘못된 값을 할당하지 않게 막고, 정살적으로 조작하는 메서드
    
<br/>

##### 내 의견 
> 객체지향 언어에서 가장 중요하고, 작은 단위가 객체이며, java에서는 class로 구성된다. java는 모든 변수가 mutable하기 때문에 변경가능성을 잘 제한해야 한다.
그렇기 위해서는 네이밍도 잘되어 있어야 하고, 방어 로직로 들어있어야 한다. 그렇지 않으면 객체는 만들어진 목적과 다르게 변형될 가능성이 존재하게 된다.
<br/>

## 2. 성숙한 클래스로 성장시키는 설계 기법 
1) 생성자로 정상적인 값을 설정하기: 최초의 `class` 생성시의 유효성 검사를 추가하자 
```
class Book {
  String name;
}

Book(String name, int price) {
  if (name == null) {
    throw new NullPointerException("책 이름을 입력해주세요.")
  }

  if (price < 0) {
    throw new IllegalArgumentException("0원 이상의 금액을 입력해주세요.")
  }
}
```

```
class Book(val name: String, val price: Int) {
  init {
    require(name.isNotEmpty()) { "책 이름을 입력해주세요." }
    require(price > 0) { "0원 이상의 금액을 입력해주세요." }
  }
}
```
<br/>

2) 계산 로직도 데이터를 가진 쪽에 구현하기
- 클래스 내부의 계산 로직들을 모아두어 코드 응집도 또한 높일 수 있다. 
```
 void discount(int discount) {
    price -+ discount;
  }
```
<br/>

3) 불변 변수로 만들어서 예상하지 못한 동작 막기

##### 내 의견 
> 이런 면에서는 mutable, immutable 변수를 선택할 수 있는 kotlin이 편리하다. kotlin에서는 객체의 일부를 수정할 때, `copy()`를 사용한다. 그러면 객체를 직접수정하는 것은 아니지만, 기존 값은 유지하면서 일부 프로퍼티만 변경하여 새로운 객체를 생성할 수 있다.

4) 변경하고 싶다면 새로운 인스턴스 만들기 
```
Book add(int other) {
  price += other;
  return Book(name, price);
}
```

##### 내 의견 
> 객체 지향에서 어려운 것은 객체의 값이 언제 변경되었는지 추척하는 것이다.
<br/>

5) 메서드 매개변수와 지역 변수도 불변으로 만들기
- `final`을 사용
<br/>

6) 엉뚱한 값을 전달하지 않도록 하기
- 기본 자료형 (String, int)들은 의미가 없기 때문에 엉뚱한 값을 전달할 가능성이 충분히 있다. 중요한 것이라면, `data class` or `value class` 등으로 객체로 만드는 것이 좋다.
<br/>

7) 의미없는 메서드 추가하지 않기
<br/>
<br/>

## 결론
- 클래스 설계란 인스턴스 변수가 잘못된 상태에 빠지지 않게 하기 위한 구조를 만드는 것
<br/>

##### 내 의견 
> 객체지향에서 가장 기본인 객체는 어떠한 것인지, 어떤 것을 주의해야 하는지 배웠습니다.

  


 
